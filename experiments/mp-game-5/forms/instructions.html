<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/favicon.ico">

    <title>Learning Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="/../../_shared/lib/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

  </head>

  <body role="document">

    <div class="container theme-showcase" role="main">
      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5"
	     aria-valuemin="0" aria-valuemax="100" style="width: 5%;">
	  <span class="sr-only">5% Complete</span>
	</div>
      </div>
      <div class="page-header">
        <h1>Instructions</h1>
      </div>
      <div class="well" style="width:800px; margin: 0 auto">
	<h2><center>Find the wudsy creatures!</center>  </h2>

  <h2><center>Instructions</center></h2>
  <p>
    You are studying creatures with a wudsy detector. The wudsy detector will tell you whether or not a creature is <it>wudsy</it>. 
    Your goal is to learn how to identify creatures that are wudsy. You will be assigned the role of "explorer" or "student". 
    <br> <br>
    <b>Explorer:</b> If you are the explorer, you will receive the wudsy detector and a grid of creatures to inspect. You can use the wudsy detector by clicking on any creature in the grid. If a creature is wudsy, the detector will highlight it with a green box. Once you have explored all the critters in the grid and have a taken moment to examine the wudsy creatures you uncovered, you will be asked to communicate your findings about wudsy creatures to your student partner in a chatroom. Finally, you will be a given a new grid of creatures without your wudsy detector. You will click on the creatures that you believe are wudsy. The creatures you select will be highlighted with yellow boxes. Once, you are confident that you have identified all the wudsy creatures in the grid, you will continue, repeating this process (grid exploration, chatroom communication, grid identification) for a few different species of wudsy creatures.

    <br> <br>
    <b>Student:</b> If you are the student, you will first wait for a few minutes until the explorer has examined the grid of examples with the assistance of their wudsy detector. Then you both will enter a chatroom, where you can discuss the properties of wudsy creatures with the explorer as long as you need. Once you feel you have a good understanding of wudsy creatures you will continue from the chatroom. Finaly, you will be a given a grid of critters. You will click on the creatures that you believe are wudsy. The creatures you select will be highlighted with yellow boxes. Once, you are confident that you have identified all the wudsy creatures in the set, you will repeat this process a few times (waiting for explorer, chatroom communication, grid identification) for a few different species of wudsy creatures.

    <br> <br>
    <b>Bonuses:</b> At the end of each identification grid, you (explorer or student) will receive a score: (# creature you correctly labeled wudsy - # creatures you incorrectly labeled wudsy). At the very end we will add your scores across the different species and with <b>your partner's scores</b>. This will be the total score for both players. You will each get <b> a bonus of $0.01 per point</b>, so pay attention and communicate effectively with your partner during the chatroom! (Negative scores will be rounded up to 0, so you cannot lose any money.)
  </p>

	<p> A few final notes: you may see this screen before the game
	  begins:
	<p>
	  <center><img src="images/Waitroom.png" alt="initial wait screen" style="width:700px;height:150px">
	  </center>
	</p>
	Just hold tight. Another player should join the game within
	the next few minutes. If you're in the waiting room 15 minutes
	without another player joining, please email us to let us know
	(schopra8@stanford.edu).
	</p>

	<p>
	  Second, please be respectful of the worker you're playing
	  with: try to be as responsive as possible.
	</p>

	<p>
	  Finally, please DO NOT refresh the page at any point once
	  you start the game (including the waiting page). If you
	  refresh, you will not be able to rejoin the game you were in
	  and you may not be able to submit the HIT. <br> Thank you!
	</p>

	<h3>
	  Please fill out this short quiz below before getting started.
	  Good luck and have fun!
	</h3>

      </div>

      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

  <br>
  You are guaranteed to be paired with another player.
  <br>
  <input type="radio" name="matched" value="no"> False
  <br>
  <input type="radio" name="matched" value="yes"> True
  <br>
        
	<br>
	Players will have unlimited time in the chatroom to discuss what they learned with their partner.
	<br>
	<input type="radio" name="mgoal" value="no"> False
	<br>
	<input type="radio" name="mgoal" value="yes"> True
	<br>

	<br>
	The explorer and student will both be tested on wudsy creatures.
	<br>
	<input type="radio" name="message" value="no"> False
	<br>
	<input type="radio" name="message" value="yes"> True
	<br>

	<br>
  The amount of money in your bonus, depends solely on your performance.
	<br>
	<input type="radio" name="comp" value="yes"> False
	<br>
	<input type="radio" name="comp" value="no"> True
	<br>

	<br>
	Have you participated in this study before?
  <br>
  <input type="radio" name="completed" value="no"> Yes
  <br>
  <input type="radio" name="completed" value="yes"> No
  <br>

	<br>
	<input id="quiz_submit" type="submit" value="Submit">
	<br>
	<br>
	<div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
      </div> <!-- /container -->
    </div>

    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);

      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="matched"]:checked').val();
        var ans2 = $('input[name="mgoal"]:checked').val();
        var ans3 = $('input[name="message"]:checked').val();
        var ans4 = $('input[name="comp"]:checked').val();
        var ans5 = $('input[name="completed"]:checked').val();

        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" &&
           ans4 == "yes" && ans5 == "yes") {
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
        } else if(counter == 3) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>

    <script src="./validate-form.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="/../../_shared/lib/js/bootstrap.min.js"></script>
  </body>
</html>
