<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/favicon.ico">

    <title>Learning Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="/../../_shared/lib/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body role="document">

    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5"
	     aria-valuemin="0" aria-valuemax="100" style="width: 5%;">
	  <span class="sr-only">5% Complete</span>
	</div>
      </div>

      <div class="page-header">
        <h1>Instructions</h1>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

	<h2><center>Identify the creatures!</center>  </h2>


  <h2><center>Instructions</center></h2>
  <p>
    You are on a new planet called Crittun, studying creatures with a "wudsy detector" and a "lumsy detector".
    The wudsy detector will tell you whether or not a creature is "wudsy", while the "lumsy detector" will tell you whether a creature is "lumsy".
    You will be paired with another turker with the goal of identifying creatures that are "wudsy" and creatures that are "lumsy". There may be overlap between "wudsy" and "lumsy" creatures.
    <br> <br>
    At the beginning, you will be given either the "wudsy" or "lumsy detector". Your partner will receive the other detector.
    You will particpate in a series of trials. On each trial, you will make a guess as to whether or not a new creature belongs to the category, and then use the detector to find out if you were right.
    If you guess incorrectly, you will have to wait 5 seconds before using the detector again. 
    We will keep a log of all the creatures you see and put a box around the ones that belonged to the detector's category.<br> 
	<p>

  <p>
    After learning about your creature category, you will be a given a short quiz on your critter category without the help of your detector.
    Then, you will enter a chatroom with your partner and teach other about your critter type. You must chat for at least 30 seconds. At which point a "continue" button will appear for one of the players to move the game along, once your chat is complete.
    Then, you will be given a short quiz, where you are asked to identify critters that belong to your partner's category.
    Then, you will be given their detector - engaging in similar trials as before, for the other critter category.
    And finally, you will be given a last small quiz, to gauge your understanding of the second critter category. 
  </p>

  <p>
    We will then sum up the amount of critters you and your partner correctly identified in the three quizzes. 
    For every critter you identify correctly, you will get 1 point.
    For each one you incorrectly identify, you will lose 1 point.
    At the end of the game you will see how many points you and your parnter acuqired across the three quizzes.
    You and your partner's points will be combined at the end for a total score.
    For each point in the total score, you will each get <b> a bonus of $0.02 per point</b>, so
    pay attention! (Your score cannot go below 0 so you cannot lose any money.)
  </p>


	<p> A few final notes: First, since you are playing with
	  another player, you may see this screen before the game
	  begins:
	<p>
	  <center><img src="images/Waitroom.png" alt="initial wait screen" style="width:700px;height:150px">
	  </center>
	</p>
	Just hold tight. Another player should join the game within
	the next few minutes. If you're in the waiting room 15 minutes
	without another player joining, please email us to let us know
	(schopra8@stanford.edu).
	</p>

	<p>
	  Second, please be respectful of the worker you're playing
	  with: try to be as responsive as possible.
    Please do not take notes -- just use your mind!
	</p>

	<p>
	  Finally, please DO NOT refresh the page at any point once
	  you start the game (including the waiting page). If you
	  refresh, you will not be able to rejoin the game you were in
	  and you may not be able to submit the HIT. <br> Thank you!
	</p>

	<h3>
	  Please fill out this short quiz below before getting started.
	  Good luck and have fun!
	</h3>

      </div>

      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

  <br>
  There may be overlap between critters that are "wudsy" and "lumsy".
  <br>
  <input type="radio" name="overlap" value="no"> False
  <br>
  <input type="radio" name="overlap" value="yes"> True
  <br>
        
	<br>
	Players will have unlimited time in the chatroom to discuss what they learned with their partner.
	<br>
	<input type="radio" name="mgoal" value="no"> False
	<br>
	<input type="radio" name="mgoal" value="yes"> True
	<br>


	<br>
	Players are tested only on the critters that their partner learned about.
	<br>
	<input type="radio" name="message" value="no"> True
	<br>
	<input type="radio" name="message" value="yes"> False
	<br>

	<br>
	Players will be rewarded based on how well they, and not their partner, do.
	<br>
	<input type="radio" name="comp" value="no"> True
	<br>
	<input type="radio" name="comp" value="yes"> False
	<br>

	<br>
	Have you participated in this study before?
        <br>
        <input type="radio" name="completed" value="no"> Yes
        <br>
        <input type="radio" name="completed" value="yes"> No
        <br>

	<br>
	<input id="quiz_submit" type="submit" value="Submit">
	<br>
	<br>
	<div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
      </div> <!-- /container -->
    </div>

    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);

      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="overlap"]:checked').val();
        var ans2 = $('input[name="mgoal"]:checked').val();
        var ans3 = $('input[name="message"]:checked').val();
        var ans4 = $('input[name="comp"]:checked').val();
        var ans5 = $('input[name="completed"]:checked').val();

        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" &&
           ans4 == "yes" && ans5 == "yes") {
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
        } else if(counter == 3) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>

    <script src="./validate-form.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="/../../_shared/lib/js/bootstrap.min.js"></script>
  </body>
</html>
