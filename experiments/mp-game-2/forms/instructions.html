<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/favicon.ico">

    <title>Learning Experiment</title>

    <!-- Bootstrap core CSS & theme -->
    <link href="../../_shared/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../_shared/css/bootstrap-theme.min.css" rel="stylesheet">


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="../../_shared/js/bootstrap.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body role="document">

    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5"
	     aria-valuemin="0" aria-valuemax="100" style="width: 5%;">
	  <span class="sr-only">5% Complete</span>
	</div>
      </div>

      <div class="page-header">
        <h1>Instructions</h1>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

	<h2><center>Identify the creatures!</center>  </h2>

	<p>
	  In this experiment you will be paired with another turker with the goal of identifying wildlife! You are going to a newly discovered island called Critter Island, and it has new species you and your partner have never encountered.
    <em>In each round, you and your partner will each learn to identify a different kind of wildlife.</em>
    For instance, you may learn about to identify a kind of bird while your partner learns to identify a kind of bug.
  </p>
  <p>
    After learning, you will have the opportunity to chat with your partner.
    After the chatroom, you will <em>either</em> have to identify the creature that you learned about (the bird) or that your partner learned about (the bug).
    <em> You and your partner's scores will be combined to determine both of your bonuses.</em>
    So, it is important that you and your partner communicate about what each of you learned, in case they have to identify the creatures you learned about.
  </p>
  <p>
    The wildlife you study will look like these:
	</p>

	<p>
	  <center>
	    <img src="images/blue.png" alt="Example objects"
		 style="width:200px; height:200px" border="1px solid black">
		   <tr style="display=inline">
		 <img src="images/purple.png" alt="Example objects"
		 style="width:200px; height:200px" border="1px solid black">
	  </center>
	</p>

	<p>
    The creature that you (or your partner) will have to identify later will have the name printed below it during the study period, while the other creatures won't have a name.
    In the example above, ollers are the creatures to be identified.
    When you have to identify the creatures later, the name will not be visible.
    So you should study the features that distinguish ollers from the other creatures (the ones without names).
	</p>

	<p>
    <b>
      The wildlife that you and your partner see will be different</b>.
      When studying the wildlife, <b>you must click them to reveal whether or not they have a name</b> (the name will initially be hidden).
      You must click on all of them to be allowed to move on.
      After studying, you will meet with your partner in a chatroom and discuss what you both have learned.
      Throughout the experiment, you may have to wait for a short period while your partner catches up with you.
	</p>

	<p>
    While in the chat room, you can discuss what you learned.
    You will be in the chat room for at least 30 seconds.
    After 30 seconds, a button will appear for either you or your partner (whomever is "Player B") that they may push to advance the experiment <strong>for both of you</strong>.
    <em>You and your partner can chat for as long as you need to make sure you both know about the creatures.</em>
  </p>

  <p>
    After chatting, you will be tested by having to select of the examples of the creature of interest.
    <strong> Sometimes you will be tested on the creatures you learned about, and sometimes you will be tested on the creatures your partner learned about.</strong>
    For instance, you or your partner may have to select all of the "ollers" (see picture above).
    <em>The name of the creature will not be visible during this selection phase</em>, so you will have to go based on the features.
    <em>The creatures will appear in a different order during the learning phase and during the test phase, so the position of the critters is not important to learn.</em>

  </p>

  <p>
    For every critter you identify correctly, you will get 1 point.
    For each one you incorrectly identify, you will lose 1 point.
    After each round you will see how many points both you and your partner received.
    You and your partner's points will be combined at the end for a total score.
    For each point in the total score, you will each get <b> a bonus of $0.02 per point</b>, so
    pay attention! (Your score cannot go below 0 so you cannot lose any money.)
  </p>

	<p>
    After collecting critters, you will immediately proceed to the next round, where the learning--chat--testing sequence will repeat.
    In total, there are 6 rounds.
	</p>

	<p> A few final notes: First, since you are playing with
	  another player, you may see this screen before the game
	  begins:
	<p>
	  <center><img src="images/Waitroom.png" alt="initial wait screen" style="width:700px;height:150px">
	  </center>
	</p>
	Just hold tight. Another player should join the game within
	the next few minutes. If you're in the waiting room 15 minutes
	without another player joining, please email us to let us know
	(mtessler@stanford.edu).
	</p>

	<p>
	  Second, please be respectful of the worker you're playing
	  with: try to be as responsive as possible.
    Please do not take notes -- just use your mind!
	</p>

	<p>
	  Finally, please DO NOT refresh the page at any point once
	  you start the game (including the waiting page). If you
	  refresh, you will not be able to rejoin the game you were in
	  and you may not be able to submit the HIT. <br> Thank you!
	</p>

	<h3>
	  Please fill out this short quiz below before getting started.
	  Good luck and have fun!
	</h3>

      </div>

      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

	<br>
	The creatures appear in the same position during the learning and test phases.
	<br>
	<input type="radio" name="dgoal" value="yes"> False
	<br>
	<input type="radio" name="dgoal" value="no"> True
	<br>


	<br>
	Players will have unlimited time in the chatroom to discuss what they learned with their partner.
	<br>
	<input type="radio" name="mgoal" value="no"> False
	<br>
	<input type="radio" name="mgoal" value="yes"> True
	<br>


	<br>
	Players are tested only on the critters that their partner learned about.
	<br>
	<input type="radio" name="message" value="no"> True
	<br>
	<input type="radio" name="message" value="yes"> False
	<br>

	<br>
	Players will be rewarded based on how well they, and not their partner, do.
	<br>
	<input type="radio" name="comp" value="no"> True
	<br>
	<input type="radio" name="comp" value="yes"> False
	<br>

	<br>
	Players will study different critters.
	<br>
	<input type="radio" name="location" value="no"> False
	<br>
	<input type="radio" name="location" value="yes"> True
	<br>

	<br>
	Have you participated in this study before?
        <br>
        <input type="radio" name="completed" value="no"> Yes
        <br>
        <input type="radio" name="completed" value="yes"> No
        <br>

	<br>
	<input id="quiz_submit" type="submit" value="Submit">
	<br>
	<br>
	<div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
      </div> <!-- /container -->
    </div>

    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);

      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="dgoal"]:checked').val();
        var ans2 = $('input[name="mgoal"]:checked').val();
        var ans3 = $('input[name="message"]:checked').val();
        var ans4 = $('input[name="comp"]:checked').val();
        var ans5 = $('input[name="location"]:checked').val();
        var ans6 = $('input[name="completed"]:checked').val();

        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" &&
           ans4 == "yes" && ans5 == "yes" && ans6 == "yes") {
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
        } else if(counter == 3) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>
    <script src="./validate-form.js"></script>

  </body>
</html>
