<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/favicon.ico">

    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="/../../_shared/lib/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <!-- Custom styles for this template -->
    <link href="theme.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body role="document">

    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5"
	     aria-valuemin="0" aria-valuemax="100" style="width: 5%;">
	  <span class="sr-only">5% Complete</span>
	</div>
      </div>

      <div class="page-header">
        <h1>Instructions</h1>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

	<h2><center>Save the Wildlife!</center>  </h2>

	<p>
	  In this experiment you will be paired with another turker with the goal of saving endangered wildlife! You are going to a newly discovered island called Critter Country, and it has new species you and your partner have never encountered.

    In each round, you and your partner will learn about two different kinds of wildlife that can help one another.
    Each of you will learn about one kind of wildlife and then teach each other about them.
    Your partner will have to select wildlife from the ones that you studied, and vice versa.
  </p>
  <p>
    The wildlife you study will look like these:
	</p>

	<p>
	  <center>
	    <img src="images/blue egg.png" alt="Example objects"
		 style="width:200px; height:200px" border="1px solid black">
		<tr style="display=inline">
		<img src="images/yellow egg.png" alt="Example objects"
		 style="width:200px; height:200px" border="1px solid black">
		 <tr>
		 <img src="images/purple.png" alt="Example objects"
		 style="width:200px; height:200px" border="1px solid black">
	  </center>
	</p>

	<p>
    The name of the kind of critter appears below it, as does whether or not the critter has a <b>hidden feature</b>.
    This hidden feature is important for saving the endangered wildlife.
    In the example above, both the oller and the ellep show an egg below: this is their hidden feature.
    In the game, you will have to click on the critter to reveal whether or not it has a hidden feature.
	</p>

	<p>
    The critters that you and your partner see will be <b>different</b>.
    Your task is to study these critters so that you can teach your partner about them.
    When studying the critters, you must <b>click on all of them</b> (revealing whether or not they have a hidden feature) to be allowed to move on.
    After studying, you will meet with your partner in a chatroom and discuss what you both have learned.
    You may have to wait in the chatroom for a short period while your partner finishes studying.
	</p>

	<p>
    While in the chat room, you can discuss what you learned.
    After chatting, you will be tasked with selecting the critters that are relevant to saving the wildlife.
    The critters you can collect are the ones that your partner learned about.
    You will not be able to see the hidden features during collection, but you will see the names.
    You will be in the chat room for 45 seconds.
    After 45 seconds, a button will appear for Player B that will continue the experiment for both of you.
    You and your partner can chat for as long as you need to make sure you both learn.
	</p>

	<p>
    After collecting critters, you will immediately proceed to the next round, where the learning--chat--collecting sequence will repeat.
    In total, there are 4 rounds.
	</p>

	<p>
    You'll both get <b> a bonus of $0.03 for each critter that helps save the wildlife </b>, so
	  pay attention!
	</p>

	<p> A few final notes: First, since you are playing with
	  another player, you may see this screen before the game
	  begins:
	<p>
	  <center><img src="images/Waitroom.png" alt="initial wait screen"
=
		       style="width:700px;height:150px">
	  </center>
	</p>
	Just hold tight. Another player should join the game within
	the next few minutes. If you're in the waiting room 15 minutes
	without another player joining, please email us to let us know
	(mtessler@stanford.edu).
	</p>

	<p>
	  Second, please be respectful of the worker you're playing
	  with: try to be as responsive as possible.
	</p>

	<p>
	  Finally, please DO NOT refresh the page at any point once
	  you start the game (including the waiting page). If you
	  refresh, you will not be able to rejoin the game you were in
	  and you may not be able to submit the HIT. <br> Thank you!
	</p>

	<h3>
	  Please fill out this short quiz below before getting started.
	  Good luck and have fun!
	</h3>

      </div>

      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

	<br>
	Players can proceed at their own pace through the experiment.
	<br>
	<input type="radio" name="dgoal" value="yes"> False
	<br>
	<input type="radio" name="dgoal" value="no"> True
	<br>


	<br>
	Players will have unlimited time in the chatroom to discuss what they learned with their partner.
	<br>
	<input type="radio" name="mgoal" value="no"> False
	<br>
	<input type="radio" name="mgoal" value="yes"> True
	<br>


	<br>
	Players will collect critters that their partner learned about.
	<br>
	<input type="radio" name="message" value="yes"> True
	<br>
	<input type="radio" name="message" value="no"> False
	<br>

	<br>
	There are a total of 10 rounds.
	<br>
	<input type="radio" name="comp" value="no"> True
	<br>
	<input type="radio" name="comp" value="yes"> False
	<br>

	<br>
	Both players will study the same critters.
	<br>
	<input type="radio" name="location" value="yes"> False
	<br>
	<input type="radio" name="location" value="no"> True
	<br>

	<br>
	Have you participated in this study before?
        <br>
        <input type="radio" name="completed" value="no"> Yes
        <br>
        <input type="radio" name="completed" value="yes"> No
        <br>

	<br>
	<input id="quiz_submit" type="submit" value="Submit">
	<br>
	<br>
	<div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
      </div> <!-- /container -->
    </div>

    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);

      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="dgoal"]:checked').val();
        var ans2 = $('input[name="mgoal"]:checked').val();
        var ans3 = $('input[name="message"]:checked').val();
        var ans4 = $('input[name="comp"]:checked').val();
        var ans5 = $('input[name="location"]:checked').val();
        var ans6 = $('input[name="completed"]:checked').val();

        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" &&
           ans4 == "yes" && ans5 == "yes" && ans6 == "yes") {
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
        } else if(counter == 3) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>

    <script src="./validate-form.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="/../../_shared/lib/js/bootstrap.min.js"></script>
  </body>
</html>
